int isPalindrome(char *s, int len) {
	int i = 0;
	int half = (len + 1) / 2;
	while (i < half) {
		if (s[i] != s[len - 1 - i])
			break;
		i++;
	}
	return (i == half);
}

char * longestPalindrome(char * s){
	int len = strlen(s);
	int indexLongest;
	int lenLongest = 0;
	int i, j, l;
	char *str;
	for (i = 0; i < len - 1; i++) {
		for (j = len - 1; j > i; j--) {
			l = (j - i) + 1; 
			if (isPalindrome(&s[i], l)) {
				if (l > lenLongest) {
					indexLongest = i;
					lenLongest = l;
					break;
				}
			}   
		}
		/* no need to advance if left substring is no longer than lenLongest */
		if (lenLongest >= (len-1-i))
			break;
	}
	if (lenLongest == 0) {
		/* not found, return any char in string (we choose first) */
		str = malloc(2);
		str[0] = s[0];
		str[1] = 0;
	} else {
		str = malloc(lenLongest + 1);
		memcpy(str, &s[indexLongest], lenLongest);
		str[lenLongest] = 0;
	}
	return str;
}

int main(void) {
	char *s = "1111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111111";
	printf("%s\n", longestPalindrome(s));
	return 0;
}
